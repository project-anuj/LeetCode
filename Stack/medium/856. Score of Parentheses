class Solution {
public:
    int scoreOfParentheses(string S) {
        stack<int>stackk;
        int result=0;
        for(int i=0;i<S.size();i++){
            if(S[i]=='('){stackk.push(0);}
            else{
                int score = (stackk.top()==0)? 1 : stackk.top();
                stackk.pop();
                if(stackk.empty()){result+=score;}
                else{stackk.top() += 2*score;}
            }
        }
        return result;
    }
};
